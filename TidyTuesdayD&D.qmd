---
title: "Tidy Tuesday - D&D"
execute:
  echo: false
description: |
  Analysis of D&D data from TidyTuesday
author: Rowan Norenberg
date: September 24, 2025
format:
  html:
    code-fold: true
    code-summary: "Show the code"
---

This is a plot I made comparing the different types of D&D monsters with their total hit points and their strength score / modifier. I enjoy acting as GM for my friends, especially for off-season bonding with my choir, but the diversity of monsters I can throw at my players is sometimes overwhelming. This way I can get a sense for what type of monster I want depending on if I want them to hit hard, be difficult to kill, or both.

First, let's look at what types of monsters are most common in D&D.

```{r message=FALSE, warning=FALSE}
#| include: false
#| echo: false

library(tidyverse)
library(ggplot2)

monsters <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-05-27/monsters.csv')
```

```{r}
#| echo: true
#| message: false
#| warning: false


num_monsters <- monsters |>
  count(type, name="num_monster") |>
  arrange(desc(num_monster))

num_monsters


```

Unsurprisingly, Beast is the most common type of D&D monster by a wide margin. It's sort of the catch-all monster category. I didn't expect Dragon to be so close behind, but given there's a whole separate dragon for like every color (or metal, or gem...) it's not all that surprising.

Personally, I'm less interested in the strength and HP scores of some of the smaller types. Any of the types that have under 10 entries, I am going to either lump in with another type that feels right, or filter out. For example, I'm fine lumping in the single Swarm of Tiny Undead in with the rest of the Undead, and I don't really need the Aberrations in there. If I want a Beholder, it's not because it has 180 HP. It's because I want a Beholder. Then, I want to compare the types across HP and Strength, which I though would be easiest to visualize with box plots. 

```{r}
#| echo: true
#| message: false
#| warning: false

common_monsters <- monsters |> 
  left_join(num_monsters, by = "type") |>  #sticking the counts column in there
  mutate(
  type = ifelse(type == "Swarm of Tiny Beasts" | type == "Beast", "Beast", 
                ifelse(type == "Swarm of Tiny Undead" | type == "Undead", "Undead",  #lumping in the swarms 
                       type
                ))) |> 
  filter(num_monster >= 10)  #filtering out small types 

```

```{r}
#| echo: true
#| message: false
#| warning: false


ggplot(common_monsters, aes(x = type, y = str, color = type)) +
  geom_boxplot() +
  labs(
    x = "",
    y = "Strength Score",
    title = "Strength of D&D Monster Types",
  )

```

The nice thing about the strength scores in D&D is that there's a hard cutoff at 30. HP doesn't have those limitations. 

```{r}
#| echo: true
#| message: false
#| warning: false


ggplot(common_monsters, aes(x = type, y = hp_number, color = type)) +
  geom_boxplot() +
  labs(
    x = "",
    y = "Hit Points",
    title = "HP of D&D Monster Types",
  )

```

Most monster types sit comfortably below 200 HP, with Dragons being the only ones who consistently go above. And that point way out there by 700 is none other than the Tarrasque, of course. 


This is a plot I made trying to see which of the schools of magic had the longest spell range on average. This was made complicated by the spell range being stored as character strings (eg "30 feet" or "Touch") so I made levels. Unfortunately this doesn't give a great representation at how different 300 feet is from 500 feet versus 5 feet from 10 feet. Work in progress.

```{r message=FALSE, warning=FALSE}
#| echo: true

#| echo: false
library(tidyverse)
library(ggplot2)

spells <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2024/2024-12-17/spells.csv', show_col_types = FALSE)
```

```{r}
#| echo: true
#| message: false
#| warning: false
#range_levels <- c( "Self", "Touch", "Sight", "5 feet", "10 feet", "15 feet", "30 feet", "60 feet", "90 feet", "100 feet", "120 feet", "150 feet", "300 feet", "500 feet", "1 mile", "500 miles", "Unlimited", "Special")

#self, touch, sight, 5 feet, 10 feet, 15 feet, 30 feet, 60 feet, 90 feet, 100 feet, 120 feet, 150 feet, 300 feet, 500 feet, 1 mile, 500 miles

#  spell duration : 
# [1] "Instantaneous"                   "8 hours"                         "Concentration, up to 1 hour"    
# [4] "24 hours"                        "Concentration, up to 1 minute"   "10 days"    
# [7] "Until dispelled"                 "Concentration, up to 10 minutes" "1 hour"  
# [10] "1 minute"                        "7 days"                          "Concentration, up to 8 hours"   
# [13] "Special"                         "Up to 8 hours"                   "Concentration, up to 1 day"     
# [16] "10 minutes"                      "1 day"                           "30 days"
# [19] "Until dispelled or triggered"    "1 round"                         "Concentration, up to 2 hours"   
# [22] "Up to 1 hour"                    "Concentration up to 10 minutes"  "Up to 1 minute" 

```

```{r}
#| echo: true
#| message: false
#| warning: false


spells |> 
  mutate(
    range_num = case_when(
      str_detect(range, "Self") ~ 0,
      str_detect(range, "Touch") ~ 5,
      str_detect(range, "Sight") ~ 600,   #max sight in D&D is 2 miles, but combat spells usually have the same range as a longbow unless buffed 
      str_detect(range, "mile\\b") ~ as.numeric(str_extract(range, "\\d+")) * 1000,
      str_detect(range, "feet") ~ as.numeric(str_extract(range, "\\d+")), 
      TRUE ~ NA_real_
    )
  ) |> 
  ggplot(aes(x = school, y = range_num, color = school)) +
  geom_boxplot() +
  labs(
    x = "School of Magic",
    y = "Range of Spell",
    title = "D&D Spell Range by School",
  )

```

```{r}
#| echo: true
#| message: false
#| warning: false

#  spell duration : 
# [1] "Instantaneous"                   "8 hours"                         "Concentration, up to 1 hour"    
# [4] "24 hours"                        "Concentration, up to 1 minute"   "10 days"    
# [7] "Until dispelled"                 "Concentration, up to 10 minutes" "1 hour"  
# [10] "1 minute"                        "7 days"                          "Concentration, up to 8 hours"   
# [13] "Special"                         "Up to 8 hours"                   "Concentration, up to 1 day"     
# [16] "10 minutes"                      "1 day"                           "30 days"
# [19] "Until dispelled or triggered"    "1 round"                         "Concentration, up to 2 hours"   
# [22] "Up to 1 hour"                    "Concentration up to 10 minutes"  "Up to 1 minute" 


con_spells <- spells |>
  filter(grepl("Concentration", duration, ignore.case = TRUE)) 



con_spells |> 
  mutate(duration = fct_relevel(duration, 
                                c("Concentration, up to 1 minute", "Concentration, up to 10 minutes", "Concentration, up to 1 hour", "Concentration, up to 2 hours", "Concentration, up to 8 hours", "Concentration, up to 1 day"))) |> 
  filter(!grepl("Concentration up to 10 minutes", duration, ignore.case = TRUE)) |>
  ggplot(aes(x = school, y = duration, color = school)) +
  geom_point() +
  labs(
    x = "School of Magic",
    y = "Duration of Spell",
    title = "Concentration Spells by School",
  )

```

Dungeons & Dragons \| The Official Home of D&D. (n.d.). D&D Beyond. Retrieved December 10, 2025, from <https://www.dndbeyond.com>

Tidytuesday/data/2024/2024-12-17 at main Â· rfordatascience/tidytuesday. (n.d.). GitHub. Retrieved December 10, 2025, from <https://github.com/rfordatascience/tidytuesday/tree/main/data/2024/2024-12-17>
